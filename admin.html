<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Admin Portal - Monsif e-Municipality">
    <title>Admin Portal - Monsif e-Municipality</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header & Navigation -->
    <header class="header">
        <nav class="navbar container">
            <div class="logo">
                <a href="index.html">Monsif e-Municipality</a>
            </div>
            
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="citizen.html" class="nav-link">Citizen Portal</a></li>
                <li><a href="admin.html" class="nav-link active">Admin Portal</a></li>
                <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
            
            <div class="nav-actions">
                <button class="theme-toggle" id="theme-toggle" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                    ☰
                </button>
            </div>
        </nav>
    </header>

    <!-- Login Section -->
    <section id="login-section" class="login-section">
        <div class="container">
            <div class="login-container">
                <div class="login-card fade-in">
                    <div class="login-header">
                        <h2>Admin Login</h2>
                        <p>Access the municipal administration portal</p>
                    </div>
                    
                    <form id="admin-login-form" data-form-type="admin-login">
                        <div class="form-group">
                            <label for="username" class="form-label">Username *</label>
                            <input type="text" id="username" name="username" class="form-input" 
                                placeholder="Enter your username" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="password" class="form-label">Password *</label>
                            <input type="password" id="password" name="password" class="form-input" 
                                placeholder="Enter your password" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="remember-me" name="rememberMe">
                                <span class="checkmark"></span>
                                Remember me
                            </label>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-full">
                            <i class="fas fa-sign-in-alt"></i>
                            Login
                        </button>
                    </form>
                    
                    <div class="login-footer">
                        <p>Demo Credentials:</p>
                        <p><strong>Username:</strong> admin</p>
                        <p><strong>Password:</strong> admin123</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Dashboard -->
    <section id="admin-dashboard" class="admin-dashboard hidden">
        <div class="container">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <div class="dashboard-title">
                    <h1>Admin Dashboard</h1>
                    <p>Manage municipal services and citizen requests</p>
                </div>
                
                <div class="dashboard-actions">
                    <button class="btn btn-secondary" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </button>
                </div>
            </div>
            
            <!-- Dashboard Stats -->
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="total-requests">0</div>
                        <div class="stat-label">Total Requests</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="total-complaints">0</div>
                        <div class="stat-label">Complaints</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-vote-yea"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="total-polls">0</div>
                        <div class="stat-label">Active Polls</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-newspaper"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="total-news">0</div>
                        <div class="stat-label">News Articles</div>
                    </div>
                </div>
            </div>
            
            <!-- Admin Sections -->
            <div class="admin-sections">
                <!-- Requests Management -->
                <div class="admin-section">
                    <div class="section-header">
                        <h2>Manage Citizen Requests</h2>
                        <button class="btn btn-primary" onclick="showAddRequestForm()">
                            <i class="fas fa-plus"></i>
                            Add Request
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Request ID</th>
                                    <th>Type</th>
                                    <th>Citizen</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="requests-table-body">
                                <!-- Requests will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Complaints Management -->
                <div class="admin-section">
                    <div class="section-header">
                        <h2>Manage Complaints</h2>
                        <button class="btn btn-primary" onclick="showAddComplaintForm()">
                            <i class="fas fa-plus"></i>
                            Add Complaint
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Complaint ID</th>
                                    <th>Type</th>
                                    <th>Citizen</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="complaints-table-body">
                                <!-- Complaints will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Polls Management -->
                <div class="admin-section">
                    <div class="section-header">
                        <h2>Manage Polls</h2>
                        <button class="btn btn-primary" onclick="showAddPollForm()">
                            <i class="fas fa-plus"></i>
                            Create Poll
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Poll ID</th>
                                    <th>Question</th>
                                    <th>Votes</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="polls-table-body">
                                <!-- Polls will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- News Management -->
                <div class="admin-section">
                    <div class="section-header">
                        <h2>Manage News</h2>
                        <button class="btn btn-primary" onclick="showAddNewsForm()">
                            <i class="fas fa-plus"></i>
                            Add News
                        </button>
                    </div>
                    
                    <div id="news-list" class="news-list">
                        <!-- News will be loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Add Request Modal -->
    <div id="add-request-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Request</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="add-request-form" data-form-type="request">
                <div class="form-group">
                    <label for="addRequestType" class="form-label">Request Type *</label>
                    <select id="addRequestType" name="requestType" class="form-select" required>
                        <option value="">Select request type</option>
                        <option value="Building Permit">Building Permit</option>
                        <option value="Business License">Business License</option>
                        <option value="Marriage Certificate">Marriage Certificate</option>
                        <option value="Birth Certificate">Birth Certificate</option>
                        <option value="Property Registration">Property Registration</option>
                        <option value="Municipal Services">Municipal Services</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="addCitizenName" class="form-label">Citizen Name *</label>
                    <input type="text" id="addCitizenName" name="citizenName" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="addDescription" class="form-label">Description *</label>
                    <textarea id="addDescription" name="description" class="form-textarea" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="addStatus" class="form-label">Status *</label>
                    <select id="addStatus" name="status" class="form-select" required>
                        <option value="Pending">Pending</option>
                        <option value="Approved">Approved</option>
                        <option value="Completed">Completed</option>
                        <option value="Rejected">Rejected</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Request</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Complaint Modal -->
    <div id="add-complaint-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Complaint</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="add-complaint-form" data-form-type="complaint">
                <div class="form-group">
                    <label for="addComplaintType" class="form-label">Complaint Type *</label>
                    <select id="addComplaintType" name="complaintType" class="form-select" required>
                        <option value="">Select complaint type</option>
                        <option value="Road Maintenance">Road Maintenance</option>
                        <option value="Water Supply">Water Supply</option>
                        <option value="Electricity">Electricity</option>
                        <option value="Waste Management">Waste Management</option>
                        <option value="Public Safety">Public Safety</option>
                        <option value="Environmental">Environmental</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="addComplaintCitizenName" class="form-label">Citizen Name *</label>
                    <input type="text" id="addComplaintCitizenName" name="citizenName" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="addComplaintDescription" class="form-label">Description *</label>
                    <textarea id="addComplaintDescription" name="description" class="form-textarea" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="addComplaintLocation" class="form-label">Location *</label>
                    <input type="text" id="addComplaintLocation" name="location" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="addComplaintStatus" class="form-label">Status *</label>
                    <select id="addComplaintStatus" name="status" class="form-select" required>
                        <option value="Submitted">Submitted</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Resolved">Resolved</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Complaint</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Poll Modal -->
    <div id="add-poll-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Poll</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="add-poll-form" data-form-type="poll">
                <div class="form-group">
                    <label for="addPollQuestion" class="form-label">Poll Question *</label>
                    <input type="text" id="addPollQuestion" name="question" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="addPollOptions" class="form-label">Poll Options *</label>
                    <textarea id="addPollOptions" name="options" class="form-textarea" 
                        placeholder="Enter each option on a new line" required></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Poll</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add News Modal -->
    <div id="add-news-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add News Article</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="add-news-form" data-form-type="news">
                <div class="form-group">
                    <label for="addNewsTitle" class="form-label">Title *</label>
                    <input type="text" id="addNewsTitle" name="title" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="addNewsContent" class="form-label">Content *</label>
                    <textarea id="addNewsContent" name="content" class="form-textarea" required></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Publish News</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Monsif e-Municipality</h3>
                    <p>Administrative portal for municipal management</p>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="citizen.html">Citizen Portal</a></li>
                        <li><a href="dashboard.html">Statistics</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Information</h3>
                    <div class="contact-info">
                        <p><i class="fas fa-phone"></i> +961-XX-XXXXXX</p>
                        <p><i class="fas fa-envelope"></i> admin@monsif.gov.lb</p>
                        <p><i class="fas fa-clock"></i> Mon-Fri: 8:00 AM - 4:00 PM</p>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Monsif Municipality. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/main.js"></script>
    
    <!-- Page-specific styles -->
    <style>
        /* Login Section */
        .login-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-white) 0%, var(--secondary-grey) 100%);
            padding: var(--spacing-3xl) 0;
        }
        
        .login-container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .login-card {
            background: var(--primary-white);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            box-shadow: 0 8px 30px var(--shadow-medium);
            border: 1px solid var(--accent-grey);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }
        
        .login-header h2 {
            margin-bottom: var(--spacing-sm);
            color: var(--text-dark);
        }
        
        .login-header p {
            color: var(--text-light);
            margin: 0;
        }
        
        .login-footer {
            margin-top: var(--spacing-xl);
            padding-top: var(--spacing-lg);
            border-top: 1px solid var(--accent-grey);
            text-align: center;
            font-size: var(--font-size-sm);
            color: var(--text-light);
        }
        
        .login-footer p {
            margin: var(--spacing-xs) 0;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            cursor: pointer;
            font-size: var(--font-size-sm);
        }
        
        .checkbox-label input[type="checkbox"] {
            display: none;
        }
        
        .checkmark {
            width: 18px;
            height: 18px;
            border: 2px solid var(--accent-grey);
            border-radius: var(--radius-sm);
            position: relative;
            transition: all var(--transition-fast);
        }
        
        .checkbox-label input[type="checkbox"]:checked + .checkmark {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }
        
        .checkbox-label input[type="checkbox"]:checked + .checkmark::after {
            content: "✓";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--primary-white);
            font-size: var(--font-size-xs);
        }
        
        .btn-full {
            width: 100%;
        }
        
        /* Admin Dashboard */
        .admin-dashboard {
            padding: var(--spacing-3xl) 0;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-2xl);
        }
        
        .dashboard-title h1 {
            margin-bottom: var(--spacing-sm);
            color: var(--text-dark);
        }
        
        .dashboard-title p {
            margin: 0;
            color: var(--text-light);
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-3xl);
        }
        
        .stat-card {
            background: var(--primary-white);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            box-shadow: 0 4px 20px var(--shadow-light);
            border: 1px solid var(--accent-grey);
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-green) 100%);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-2xl);
            color: var(--primary-white);
        }
        
        .stat-content {
            flex: 1;
        }
        
        .stat-number {
            font-size: var(--font-size-3xl);
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: var(--spacing-xs);
        }
        
        .stat-label {
            font-size: var(--font-size-lg);
            color: var(--text-light);
            font-weight: 500;
        }
        
        .admin-sections {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-3xl);
        }
        
        .admin-section {
            background: var(--primary-white);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            box-shadow: 0 4px 20px var(--shadow-light);
            border: 1px solid var(--accent-grey);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
        }
        
        .section-header h2 {
            margin: 0;
            color: var(--text-dark);
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: var(--spacing-lg);
        }
        
        .admin-table th,
        .admin-table td {
            padding: var(--spacing-md);
            text-align: left;
            border-bottom: 1px solid var(--accent-grey);
        }
        
        .admin-table th {
            background: var(--secondary-grey);
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .admin-table td {
            color: var(--text-light);
        }
        
        .status-badge {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 500;
            text-transform: uppercase;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background: #d4edda;
            color: #155724;
        }
        
        .status-completed {
            background: #cce5ff;
            color: #004085;
        }
        
        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-submitted {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-in-progress {
            background: #cce5ff;
            color: #004085;
        }
        
        .status-resolved {
            background: #d4edda;
            color: #155724;
        }
        
        .status-active {
            background: #d4edda;
            color: #155724;
        }
        
        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }
        
        .btn-sm {
            padding: var(--spacing-xs) var(--spacing-sm);
            font-size: var(--font-size-xs);
        }
        
        .news-list {
            display: grid;
            gap: var(--spacing-lg);
        }
        
        .news-item {
            background: var(--secondary-grey);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            border: 1px solid var(--accent-grey);
        }
        
        .news-item h4 {
            margin-bottom: var(--spacing-sm);
            color: var(--text-dark);
        }
        
        .news-item p {
            margin-bottom: var(--spacing-sm);
            color: var(--text-light);
        }
        
        .news-meta {
            display: flex;
            justify-content: space-between;
            font-size: var(--font-size-sm);
            color: var(--text-light);
        }
        
        .modal-actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: flex-end;
            margin-top: var(--spacing-xl);
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-lg);
            }
            
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-md);
            }
            
            .admin-table {
                font-size: var(--font-size-sm);
            }
            
            .admin-table th,
            .admin-table td {
                padding: var(--spacing-sm);
            }
            
            .modal-actions {
                flex-direction: column;
            }
        }
    </style>
    
    <!-- Page-specific JavaScript -->
    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            // Always start with login section
            showLoginSection();
            
            // Only auto-login if user explicitly wants to stay logged in
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const rememberMe = localStorage.getItem('rememberMe') === 'true';
            
            if (currentUser && rememberMe) {
                // Show a brief login animation then proceed to dashboard
                setTimeout(() => {
                    showAdminDashboard();
                    loadAdminDashboard();
                }, 1000);
            }
        });
        
        function showLoginSection() {
            document.getElementById('login-section').classList.remove('hidden');
            document.getElementById('admin-dashboard').classList.add('hidden');
        }
        
        function showAdminDashboard() {
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('admin-dashboard').classList.remove('hidden');
        }
        
        function logout() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('rememberMe');
            currentUser = null;
            showLoginSection();
            showSuccessMessage('Logged out successfully');
        }
        
        function showAddRequestForm() {
            document.getElementById('add-request-modal').classList.add('active');
        }
        
        function showAddComplaintForm() {
            document.getElementById('add-complaint-modal').classList.add('active');
        }
        
        function showAddPollForm() {
            document.getElementById('add-poll-modal').classList.add('active');
        }
        
        function showAddNewsForm() {
            document.getElementById('add-news-modal').classList.add('active');
        }
        
        // Update dashboard stats
        function updateDashboardStats() {
            document.getElementById('total-requests').textContent = mockData.requests.length;
            document.getElementById('total-complaints').textContent = mockData.complaints.length;
            document.getElementById('total-polls').textContent = mockData.polls.filter(p => p.active).length;
            document.getElementById('total-news').textContent = mockData.news.length;
        }
        
        // Override the admin dashboard loading to include stats update
        const originalLoadAdminDashboard = loadAdminDashboard;
        loadAdminDashboard = function() {
            originalLoadAdminDashboard();
            updateDashboardStats();
        };
    </script>
</body>
</html>
